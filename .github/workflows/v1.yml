name: Teams Notify
run-name: v1 workflow

on:
  push:
    branches:
      - v1

jobs:
  
 stage_1:
  runs-on: ubuntu-latest
  steps:
      - name: Print User who started workflow
        run: |
          echo "The user who started this workflow is: ${{github.actor}}"
      - name: Sleep for 5 seconds
        run: sleep 5s
        shell: bash
 stage_2:
  runs-on: ubuntu-latest
  needs: stage_1
  steps:
      - name: Print User who started workflow
        run: |
          echo "The user who started this workflow is: ${{github.workflow}}"
      - name: Sleep for 5 seconds
        run: sleep 5s
        shell: bash
 stage_3:
  runs-on: ubuntu-latest
  needs: stage_2
  steps:
      - name: Workflow
        run: |
          echo "The workflow is: ${{github.workflow}}"
      - name: Sleep for 10 seconds
        run: sleep 10s
        shell: bash
 stage_4:
  runs-on: ubuntu-latest
  needs: stage_3
  steps:
      - name: Sleep for 5 seconds
        run: sleep 5s
        shell: bash
      - name: Workflow
        run: |
          echo "The workflow is: ${{github.workflow}}"
          exit 1
 stage_5:
  runs-on: ubuntu-latest
  if: success()
  needs: stage_4
  steps:
      - name: Sleep for 5 seconds
        run: sleep 5s
        shell: bash
      - name: Workflow
        run: |
          echo "${{github.actor}} triggered ${{github.workflow}} for ${{ github.event.repository.name }} "
 notify_teams:
  runs-on: ubuntu-latest
  needs: stage_5
  if: failure()
  steps:
      - name: Workflow
        run: |
          echo "The workflow is: ${{github.workflow}}"
      - name: Sleep for 10 seconds
        run: sleep 10s
        shell: bash

